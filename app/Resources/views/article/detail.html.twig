{% extends 'layout.html.twig' %}

{% block title %}{{ article.title }} - {% if category.seoTitle|default() %}{{ category.seoTitle }}{% else %}{{ category.name|default() }}{% endif %} - {{ parent() }}{% endblock %}

{% block keywords %}{{ seoKeyword }}{% endblock %}

{% block description %}{{ seoDesc|plain_text(100) }}{% endblock %}


{% set bodyClass = 'article-detail-page' %}

{% do script(['libs/jquery-validation.js','libs/es-ckeditor/ckeditor.js','app/js/article/detail/index.js']) %}

{% block content %}

{% set articleSetting = setting('article') %}
  {% set enable_anti_brush_captcha = setting('ugc_content_audit.enable_anti_brush_captcha')|default(1) %}
  <input type="hidden" name="enable_anti_brush_captcha" value="{{enable_anti_brush_captcha}}">
  {% if enable_anti_brush_captcha == 1 %}
    <div class="js-mask" style="position:fixed; left:0px; top:0px; background:rgba(0, 0, 0, 0.4); width:100%; height:100%; filter:alpha(opacity=60); opacity:0.6;display:none; z-index:100;"></div>
    <div class="form-group cd-mb32 js-drag-jigsaw" style="width: 338px; height: 219px; position:fixed; z-index:101; display: none; background: white;">
      {% include 'common/drag.html.twig' with { auth: true, showLabel: 0 } %}
    </div>
  {% endif %}
  <div class="article-detail row" id="detail-content">
    <!-- 主内容 -->
    <div class="col-md-8 article-detail-main">
      <section class="es-section article-content">
        {% include 'article/part/detail-breadcrumb.html.twig' %}
        <div class="js-article-copy-body" data-copy="{{setting('article.copy_enabled',1)}}">
          {% include 'article/part/detail-metas.html.twig' %}

          {% include 'article/part/detail-body.html.twig' %}
        </div>

        {% include 'attachment/widget/list.html.twig' with {targetType:'article', targetId:article.id} %}

        {% include 'article/part/detail-copyright.html.twig' %}

        {% include 'article/part/detail-tags.html.twig' %}

        {% include 'article/part/detail-share.html.twig' %}

        {% if articleSetting.show_comment|default('1') != 0 %}
          {% include 'article/part/detail-post-form.html.twig' %}

          {% include 'article/part/detail-post-list.html.twig' %}
        {% endif %}
        
      </section>
    </div>
    
    <aside class="col-md-4 article-sidebar">
      {% include 'article/widget/sidebar.html.twig' with {'isShowComment': articleSetting.show_comment|default('1') } %}
    </aside>
    
  </div>

{% endblock %}

