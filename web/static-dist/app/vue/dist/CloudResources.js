(window.webpackJsonp=window.webpackJsonp||[]).push([[404],{134:function(e,t,a){e.exports=a(412)},2:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},2038:function(e,t,a){"use strict";a.r(t);var n=a(46),r=a.n(n),o=a(94),i=a.n(o),s=a(81),c=a.n(s),l=a(95),u=a.n(l),d=a(134),f=a.n(d),p=a(122),m=a.n(p),v=a(40),h=a.n(v),_=a(406),y=a.n(_),g=a(235),b=a.n(g),k=a(440),x=a.n(k),w=a(2069),C={name:"EditModal",props:{tags:{type:Array,required:!0}},data:function(){return{visible:!1,confirmLoading:!1,form:{id:void 0,tagIds:void 0,replayPublic:"0"}}},methods:{showModal:function(e){var t=e.id,a=e.tag,n=e.replayPublic;this.form.id=t,this.form.tagIds=a,this.form.replayPublic=n,this.visible=!0},handleCancel:function(){this.visible=!1},handleOk:function(){var e=this;return y()(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.confirmLoading=!0,a={query:{id:e.form.id},params:e.form},t.next=4,w.q.update(a);case 4:n=t.sent,n.success&&(e.$message.success(Translator.trans("message.edit_succeeded")),e.confirmLoading=!1,e.visible=!1,e.$emit("success",e.form));case 7:case"end":return t.stop()}}),t)})))()}}},T=a(31),S=Object(T.a)(C,(function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e._f("trans")("modal.title.edit"),visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{attrs:{model:e.form,labelCol:{span:4},wrapperCol:{span:20}}},[t("a-form-model-item",{attrs:{label:e._f("trans")("form.label.tag")}},[t("a-select",{attrs:{mode:"multiple",placeholder:e._f("trans")("placeholder.playback_label")},model:{value:e.form.tagIds,callback:function(t){e.$set(e.form,"tagIds",t)},expression:"form.tagIds"}},e._l(e.tags,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v("\n          "+e._s(a.name)+"\n        ")])})),1)],1),e._v(" "),t("a-form-model-item",{attrs:{label:e._f("trans")("form.label.share")}},[t("a-radio-group",{model:{value:e.form.replayPublic,callback:function(t){e.$set(e.form,"replayPublic",t)},expression:"form.replayPublic"}},[t("a-radio",{staticClass:"mt8",attrs:{value:"1"}},[e._v("\n          "+e._s(e._f("trans")("radio.share_to_live_playback"))+"\n        ")]),e._v(" "),t("a-radio",{staticClass:"mt8",attrs:{value:"0"}},[e._v("\n          "+e._s(e._f("trans")("radio.visible_only_to_yourself"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,I={name:"RemoveModal",data:function(){return{visible:!1,confirmLoading:!1,currentId:void 0}},methods:{showModal:function(e){this.currentId=e,this.visible=!0},handleCancel:function(){this.visible=!1},handleOk:function(){var e=this;return y()(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.confirmLoading=!0,a={data:{ids:[e.currentId]}},t.next=4,w.q.delete(a);case 4:n=t.sent,n.success&&(e.$message.success(Translator.trans("message.removal_succeeded")),e.confirmLoading=!1,e.visible=!1,e.$emit("success",e.currentId));case 7:case"end":return t.stop()}}),t)})))()}}},O=Object(T.a)(I,(function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e._f("trans")("site.btn.remove_playback"),visible:e.visible},on:{cancel:e.handleCancel}},[e._v("\n  "+e._s(e._f("trans")("modal.content.remove_playback_resources"))+"\n  "),t("template",{slot:"footer"},[t("div",{staticClass:"clearfix"},[t("span",{staticClass:"pull-left",staticStyle:{color:"#fe4040","margin-top":"7px"}},[e._v("\n        "+e._s(e._f("trans")("live.playback.tip.cannot_be_used_normally"))+"\n      ")]),e._v(" "),t("a-button",{attrs:{type:"danger",loading:e.confirmLoading},on:{click:e.handleOk}},[e._v("\n        "+e._s(e._f("trans")("site.btn.confirm"))+"\n      ")])],1)])],2)}),[],!1,null,null,null).exports;function F(e,t){var a=r()(e);if(i.a){var n=i()(e);t&&(n=n.filter((function(t){return c()(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):u.a?f()(e,u()(a)):F(Object(a)).forEach((function(t){m()(e,t,c()(a,t))}))}return e}var M=[{title:Translator.trans("live_name"),dataIndex:"title"},{title:Translator.trans("live_statistics.presenter"),dataIndex:"anchor"},{title:Translator.trans("live_playback_duration"),dataIndex:"liveTime"},{title:Translator.trans("live_statistics.live_time"),dataIndex:"liveStartTime"},{title:Translator.trans("live_statistics.operation"),scopedSlots:{customRender:"actions"}}],L={name:"LivePlayback",components:{EditModal:S,RemoveModal:O},data:function(){return{searchForm:{time:void 0,replayTagId:void 0,courseCategoryId:void 0,keyword:"",keywordType:"activityTitle"},data:[],columns:M,pagination:{hideOnSinglePage:!0,current:1,pageSize:10,total:0},loading:!1,categoryData:[],tagData:[]}},computed:{searchQuery:function(){var e=x.a.pickBy(this.searchForm,x.a.identity);if(!x.a.size(e))return{};var t=e.time;return t&&(e.startTime=moment(t[0]).unix(),e.endTime=moment(t[1]).unix(),delete e.time),e}},mounted:function(){this.fetchLiveReplay(),this.fetchCourseCategory(),this.fetchCourseTag()},methods:{fetchCourseCategory:function(){var e=this;return y()(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.h.get();case 2:a=t.sent,n=a.data,e.categoryData=n;case 5:case"end":return t.stop()}}),t)})))()},fetchCourseTag:function(){var e=this;return y()(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.k.get();case 2:a=t.sent,n=a.data,e.tagData=n;case 5:case"end":return t.stop()}}),t)})))()},handleClickSearch:function(){this.pagination.current=1,this.fetchLiveReplay()},handleTableChange:function(e){this.pagination.current=e.current,this.fetchLiveReplay()},fetchLiveReplay:function(){var e=this;return y()(b.a.mark((function t(){var a,n,r,o,i,s,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,a=e.pagination,n=a.current,r=a.pageSize,o={params:P({offset:(n-1)*r,limit:r},e.searchQuery)},t.next=5,w.q.get(o);case 5:i=t.sent,s=i.data,c=i.paging,e.loading=!1,e.pagination.total=c.total,e.data=s;case 11:case"end":return t.stop()}}),t)})))()},handleClickView:function(e){window.open(e)},handleClickEdit:function(e){this.$refs.editModal.showModal(e)},handleClickRemove:function(e){this.$refs.removeModal.showModal(e)},removeSuccess:function(e){var t=this;x.a.forEach(this.data,(function(a,n){if(a.id===e)return t.data.splice(n,1),!1}))},editSuccess:function(e){var t=e.id,a=e.replayPublic,n=e.tagIds;x.a.forEach(this.data,(function(e,r){if(e.id===t)return e.tag=n,e.replayPublic=a,!1}))}}},R=Object(T.a)(L,(function(){var e=this,t=e._self._c;return t("div",[t("a-form-model",{staticClass:"mt16",attrs:{layout:"inline",model:e.searchForm}},[t("a-form-model-item",[t("a-range-picker",{model:{value:e.searchForm.time,callback:function(t){e.$set(e.searchForm,"time",t)},expression:"searchForm.time"}})],1),e._v(" "),t("a-form-model-item",[t("a-select",{staticStyle:{width:"160px"},attrs:{allowClear:!0,placeholder:e._f("trans")("placeholder.course_category")},model:{value:e.searchForm.courseCategoryId,callback:function(t){e.$set(e.searchForm,"courseCategoryId",t)},expression:"searchForm.courseCategoryId"}},e._l(e.categoryData,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v("\n          "+e._s(a.name)+"\n        ")])})),1)],1),e._v(" "),t("a-form-model-item",[t("a-select",{staticStyle:{width:"160px"},attrs:{allowClear:!0,placeholder:e._f("trans")("placeholder.playback_label")},model:{value:e.searchForm.replayTagId,callback:function(t){e.$set(e.searchForm,"replayTagId",t)},expression:"searchForm.replayTagId"}},e._l(e.tagData,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v("\n          "+e._s(a.name)+"\n        ")])})),1)],1),e._v(" "),t("a-form-model-item",[t("a-input-group",{attrs:{compact:""}},[t("a-select",{staticStyle:{width:"100px"},attrs:{"default-value":"activityTitle"},model:{value:e.searchForm.keywordType,callback:function(t){e.$set(e.searchForm,"keywordType",t)},expression:"searchForm.keywordType"}},[t("a-select-option",{attrs:{value:"activityTitle"}},[e._v("\n            "+e._s(e._f("trans")("live_name"))+"\n          ")]),e._v(" "),t("a-select-option",{attrs:{value:"anchor"}},[e._v("\n            "+e._s(e._f("trans")("live_statistics.presenter"))+"\n          ")]),e._v(" "),t("a-select-option",{attrs:{value:"courseTitle"}},[e._v("\n            "+e._s(e._f("trans")("course.name"))+"\n          ")])],1),e._v(" "),t("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:e._f("trans")("placeholder.enter_keyword")},model:{value:e.searchForm.keyword,callback:function(t){e.$set(e.searchForm,"keyword",t)},expression:"searchForm.keyword"}})],1)],1),e._v(" "),t("a-form-model-item",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleClickSearch}},[e._v("\n        "+e._s(e._f("trans")("site.search_hint"))+"\n      ")])],1)],1),e._v(" "),t("a-table",{staticClass:"mt16",attrs:{columns:e.columns,"row-key":function(e){return e.id},"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"actions",fn:function(a){return[t("a-button-group",[t("a-button",{staticStyle:{padding:"0 8px"},attrs:{type:"primary"},on:{click:function(t){return e.handleClickEdit(a)}}},[e._v("\n          "+e._s(e._f("trans")("modal.title.edit"))+"\n        ")]),e._v(" "),t("a-dropdown",{attrs:{placement:"bottomRight"}},[t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",{on:{click:function(t){return e.handleClickView(a.url)}}},[e._v("\n              "+e._s(e._f("trans")("site.btn.view_playback"))+"\n            ")]),e._v(" "),t("a-menu-item",{on:{click:function(t){return e.handleClickRemove(a.id)}}},[e._v("\n              "+e._s(e._f("trans")("site.btn.remove_playback"))+"\n            ")])],1),e._v(" "),t("a-button",{staticStyle:{padding:"0 8px"},attrs:{type:"primary"}},[t("a-icon",{attrs:{type:"down"}})],1)],1)],1)]}}])}),e._v(" "),t("remove-modal",{ref:"removeModal",on:{success:e.removeSuccess}}),e._v(" "),t("edit-modal",{ref:"editModal",attrs:{tags:e.tagData},on:{success:e.editSuccess}})],1)}),[],!1,null,null,null);t.default=R.exports},2071:function(e,t,a){a(2072),e.exports=a(55).Reflect.deleteProperty},2072:function(e,t,a){var n=a(93),r=a(222).f,o=a(165);n(n.S,"Reflect",{deleteProperty:function(e,t){var a=r(o(e),t);return!(a&&!a.configurable)&&delete e[t]}})},2077:function(e,t,a){e.exports=a(2071)},264:function(e,t,a){a(265);var n=a(55).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},265:function(e,t,a){var n=a(166),r=a(222).f;a(407)("getOwnPropertyDescriptor",(function(){return function(e,t){return r(n(e),t)}}))},3:function(e,t,a){var n=a(122);function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),n(e,r.key,r)}}e.exports=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),n(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},40:function(e,t,a){var n=a(122);e.exports=function(e,t,a){return t in e?n(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},e.exports.__esModule=!0,e.exports.default=e.exports},408:function(e,t,a){a(482),e.exports=a(55).Object.getOwnPropertySymbols},409:function(e,t,a){a(410),e.exports=a(55).Object.getOwnPropertyDescriptors},410:function(e,t,a){var n=a(93),r=a(411),o=a(166),i=a(222),s=a(483);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,a,n=o(e),c=i.f,l=r(n),u={},d=0;l.length>d;)void 0!==(a=c(n,t=l[d++]))&&s(u,t,a);return u}})},411:function(e,t,a){var n=a(443),r=a(414),o=a(165),i=a(123).Reflect;e.exports=i&&i.ownKeys||function(e){var t=n.f(o(e)),a=r.f;return a?t.concat(a(e)):t}},412:function(e,t,a){a(413);var n=a(55).Object;e.exports=function(e,t){return n.defineProperties(e,t)}},413:function(e,t,a){var n=a(93);n(n.S+n.F*!a(176),"Object",{defineProperties:a(481)})},46:function(e,t,a){e.exports=a(911)},81:function(e,t,a){e.exports=a(264)},911:function(e,t,a){a(912),e.exports=a(55).Object.keys},912:function(e,t,a){var n=a(442),r=a(441);a(407)("keys",(function(){return function(e){return r(n(e))}}))},94:function(e,t,a){e.exports=a(408)},95:function(e,t,a){e.exports=a(409)}}]);