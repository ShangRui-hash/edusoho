(window.webpackJsonp=window.webpackJsonp||[]).push([[402],{2:function(t,a){t.exports=function(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},2036:function(t,a,e){"use strict";e.r(a);var s=e(406),i=e.n(s),n=e(235),l=e.n(n),r=e(2241),c=e(440),o=e.n(c),u=e(2069),d=[{title:Translator.trans("live_statistics.user_name"),dataIndex:"nickname"},{title:Translator.trans("live_statistics.true_name"),dataIndex:"truename"},{title:Translator.trans("live_statistics.mobile"),dataIndex:"mobile"},{title:Translator.trans("live_statistics.email"),dataIndex:"email"},{title:Translator.trans("live_statistics.enter_theLlive_room_time"),dataIndex:"firstEnterTime"},{title:Translator.trans("live_statistics.watching_time"),dataIndex:"watchDuration"},{title:Translator.trans("live_statistics.check_in_number"),dataIndex:"checkinNum"},{title:Translator.trans("live_statistics.chat_number"),dataIndex:"chatNumber"},{title:Translator.trans("live_statistics.answers_number"),dataIndex:"answerNum"}],_={props:{taskId:{type:String,required:!0}},data:function(){return{data:[],columns:d,pagination:{hideOnSinglePage:!0,current:1,pageSize:10,total:0},loading:!1,keyword:""}},mounted:function(){this.fetchLiveMembers()},methods:{onSearch:function(t){(t=o.a.trim(t))!==this.keyword&&(this.keyword=t,this.pagination.current=1,this.fetchLiveMembers())},handleTableChange:function(t){this.pagination.current=t.current,this.fetchLiveMembers()},fetchLiveMembers:function(){var t=this;return i()(l.a.mark((function a(){var e,s,i,n,r,c,o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,e=t.pagination,s=e.current,i=e.pageSize,n={query:{taskId:t.taskId},params:{nameOrMobile:t.keyword,offset:(s-1)*i,limit:i}},a.next=5,u.r.getLiveMembers(n);case 5:r=a.sent,c=r.data,o=r.paging,t.loading=!1,t.pagination.total=o.total,t.data=c;case 11:case"end":return a.stop()}}),a)})))()},handleClickExport:function(){window.open("/task/".concat(this.taskId,"/live_statistic/export?nameOrMobile=").concat(this.keyword))}}},v=e(31),p=Object(v.a)(_,(function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"clearfix"},[a("a-input-search",{staticClass:"pull-left",staticStyle:{width:"200px"},attrs:{placeholder:t._f("trans")("live_statistics.user_name_or_mobile_number")},on:{search:t.onSearch}}),t._v(" "),a("a-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:t.handleClickExport}},[t._v(t._s(t._f("trans")("site.btn.export")))])],1),t._v(" "),a("a-table",{staticClass:"mt24",attrs:{columns:t.columns,"data-source":t.data,"row-key":function(t){return t.id},pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange}})],1)}),[],!1,null,null,null).exports,f=[{title:Translator.trans("live_statistics.user_name"),dataIndex:"nickname"},{title:Translator.trans("live_statistics.mobile"),dataIndex:"mobile"},{title:Translator.trans("live_statistics.email"),dataIndex:"email"},{title:Translator.trans("live_statistics.checkin_status"),dataIndex:"checkin",scopedSlots:{customRender:"checkin"}}],h={props:{taskId:{type:String,required:!0}},data:function(){return{data:[],columns:f,pagination:{hideOnSinglePage:!0,current:1,pageSize:10,total:0},loading:!1,status:""}},mounted:function(){this.fetchLiveRollCall()},methods:{handleSelectChange:function(t){this.status=t,this.pagination.current=1,this.fetchLiveRollCall()},handleTableChange:function(t){this.pagination.current=t.current,this.fetchLiveRollCall()},fetchLiveRollCall:function(){var t=this;return i()(l.a.mark((function a(){var e,s,i,n,r,c,o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,e=t.pagination,s=e.current,i=e.pageSize,n={query:{taskId:t.taskId},params:{status:t.status,offset:(s-1)*i,limit:i}},a.next=5,u.r.getLiveRollCall(n);case 5:r=a.sent,c=r.data,o=r.paging,t.loading=!1,t.pagination.total=o.total,t.data=c;case 11:case"end":return a.stop()}}),a)})))()},handleClickExport:function(){window.open("/task/".concat(this.taskId,"/live_statistic/roll_call/export?status=").concat(this.status))}}},m=Object(v.a)(h,(function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"clearfix"},[a("a-select",{staticClass:"pull-left",staticStyle:{width:"120px"},attrs:{"default-value":""},on:{change:t.handleSelectChange}},[a("a-select-option",{attrs:{value:""}},[t._v(t._s(t._f("trans")("live_statistics.checkin_status.all")))]),t._v(" "),a("a-select-option",{attrs:{value:"checked"}},[t._v(t._s(t._f("trans")("live_statistics.checkin_status.checked")))]),t._v(" "),a("a-select-option",{attrs:{value:"unchecked"}},[t._v(t._s(t._f("trans")("live_statistics.checkin_status.not_checked")))])],1),t._v(" "),a("a-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:t.handleClickExport}},[t._v(t._s(t._f("trans")("site.btn.export")))])],1),t._v(" "),a("a-table",{staticClass:"mt24",attrs:{columns:t.columns,"data-source":t.data,"row-key":function(t){return t.id},pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"checkin",fn:function(e){return a("span",{},[t._v("\n      "+t._s(t._f("trans")("1"==e?"site.yes":"site.no"))+"\n    ")])}}])})],1)}),[],!1,null,null,null).exports,g={name:"classroomManageLiveStatisticsDetails",components:{Layout:r.a,LearningDuration:p,RollCall:m},data:function(){return{taskId:this.$route.query.taskId,liveData:{}}},mounted:function(){this.fetchLiveDetails()},methods:{fetchLiveDetails:function(){var t=this;return i()(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.r.getLiveDetails({query:{taskId:t.taskId}});case 2:t.liveData=a.sent;case 3:case"end":return a.stop()}}),a)})))()}}},k=(e(2252),Object(v.a)(g,(function(){var t=this,a=t._self._c;return a("layout",{scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"pull-left"},[t._v(t._s(t.liveData.course.title)+" / "+t._s(t.liveData.task.title))]),t._v(" "),a("div",{staticClass:"pull-right tips"},[t._v(t._s(t._f("trans")("live_statistics.detail_notice")))])])]},proxy:!0}])},[t._v(" "),a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:6}},[a("div",{staticClass:"live-data"},[a("div",{staticClass:"live-data__value text-overflow"},[t._v(t._s(t.liveData.teacher))]),t._v(" "),a("div",{staticClass:"live-data__label"},[t._v(t._s(t._f("trans")("live_statistics.presenter")))])])]),t._v(" "),a("a-col",{attrs:{span:12}},[a("div",{staticClass:"live-data"},[a("div",{staticClass:"live-data__value"},[t._v("\n          "+t._s(t.$dateFormat(t.liveData.startTime,"YYYY-MM-DD HH:mm"))+"\n          "+t._s(t._f("trans")("live_statistics.to"))+"\n          "+t._s(t.$dateFormat(t.liveData.endTime,"YYYY-MM-DD HH:mm"))+"\n        ")]),t._v(" "),a("div",{staticClass:"live-data__label"},[t._v(t._s(t._f("trans")("live_statistics.live_time")))])])]),t._v(" "),a("a-col",{attrs:{span:6}},[a("div",{staticClass:"live-data"},[a("div",{staticClass:"live-data__value"},[t._v(t._s(t.liveData.length)+t._s(t._f("trans")("site.date.minute")))]),t._v(" "),a("div",{staticClass:"live-data__label"},[t._v(t._s(t._f("trans")("live_statistics.actual_live_time")))])])])],1),t._v(" "),a("a-row",{staticClass:"mt16",attrs:{gutter:16}},[a("a-col",{attrs:{span:6}},[a("div",{staticClass:"live-data"},[a("div",{staticClass:"live-data__value"},[t._v(t._s(t.liveData.maxOnlineNumber)+t._s(t._f("trans")("live_statistics.people")))]),t._v(" "),a("div",{staticClass:"live-data__label"},[t._v(t._s(t._f("trans")("live_statistics.online_number")))])])]),t._v(" "),a("a-col",{attrs:{span:6}},[a("div",{staticClass:"live-data"},[a("div",{staticClass:"live-data__value"},[t._v(t._s(t.liveData.memberNumber)+t._s(t._f("trans")("live_statistics.people")))]),t._v(" "),a("div",{staticClass:"live-data__label"},[t._v(t._s(t._f("trans")("live_statistics.number_of_visitors")))])])]),t._v(" "),a("a-col",{attrs:{span:6}},[a("div",{staticClass:"live-data"},[a("div",{staticClass:"live-data__value"},[t._v(t._s(t.liveData.chatNumber)+t._s(t._f("trans")("live_statistics.strip")))]),t._v(" "),a("div",{staticClass:"live-data__label"},[t._v(t._s(t._f("trans")("live_statistics.all_chat_number")))])])]),t._v(" "),a("a-col",{attrs:{span:6}},[a("div",{staticClass:"live-data"},[a("div",{staticClass:"live-data__value"},[t._v(t._s(t.liveData.avgWatchTime)+t._s(t._f("trans")("site.date.minute")))]),t._v(" "),a("div",{staticClass:"live-data__label"},[t._v(t._s(t._f("trans")("live_statistics.per_capita_viewing_time")))])])])],1),t._v(" "),a("a-tabs",{staticClass:"mt16",attrs:{"default-active-key":"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:t._f("trans")("live_statistics.detail.total_learn_time")}},[a("learning-duration",{attrs:{"task-id":t.taskId}})],1),t._v(" "),a("a-tab-pane",{key:"2",attrs:{tab:t._f("trans")("live_statistics.detail.checkin")}},[a("roll-call",{attrs:{"task-id":t.taskId}})],1)],1)],1)}),[],!1,null,"709b6de7",null));a.default=k.exports},2045:function(t,a,e){"use strict";e.r(a);var s=e(406),i=e.n(s),n=e(235),l=e.n(n),r=e(440),c=e.n(r),o=e(2241),u=e(2069),d=[{title:Translator.trans("course.name"),dataIndex:"courseTitle"},{title:Translator.trans("course.task"),dataIndex:"title"},{title:Translator.trans("live_statistics.live_start_time"),dataIndex:"startTime",scopedSlots:{customRender:"startTime"}},{title:Translator.trans("live_statistics.live_time_long"),dataIndex:"length"},{title:Translator.trans("live_statistics.max_participate_count"),dataIndex:"maxStudentNum"},{title:Translator.trans("live_statistics.live_status"),dataIndex:"status",scopedSlots:{customRender:"status"}},{title:Translator.trans("live_statistics.operation"),scopedSlots:{customRender:"action"}}],_={name:"ClassroomManageLiveStatistics",components:{Layout:o.a},data:function(){return{classroomId:$(".js-classroom-id").val(),data:[],columns:d,pagination:{hideOnSinglePage:!0,current:1,pageSize:10,total:0},loading:!1,keyword:"",courseId:"",courseList:[]}},mounted:function(){this.fetchLiveStatistics(),this.fetchClassroomCourses()},methods:{onSearch:function(t){(t=c.a.trim(t))!==this.keyword&&(this.keyword=t,this.pagination.current=1,this.fetchLiveStatistics())},handleSelectChange:function(t){this.courseId=t,this.pagination.current=1,this.fetchLiveStatistics()},handleTableChange:function(t){this.pagination.current=t.current,this.fetchLiveStatistics()},fetchLiveStatistics:function(){var t=this;return i()(l.a.mark((function a(){var e,s,i,n,r,c,o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,e=t.pagination,s=e.current,i=e.pageSize,n={query:{classroomId:t.classroomId},params:{title:t.keyword,courseId:t.courseId,offset:(s-1)*i,limit:i}},a.next=5,u.r.getClassroom(n);case 5:r=a.sent,c=r.data,o=r.paging,t.loading=!1,t.pagination.total=o.total,t.data=c;case 11:case"end":return a.stop()}}),a)})))()},fetchClassroomCourses:function(){var t=this;return i()(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.e.getCourses({query:{classroomId:t.classroomId}});case 2:t.courseList=a.sent;case 3:case"end":return a.stop()}}),a)})))()},handleClickViewDetail:function(t){this.$router.push({name:"ClassroomManageLiveStatisticsDetails",query:{taskId:t}})},getTaskStatus:function(t){return{coming:"live_statistics.live_coming",playing:"live_statistics.live_playing",finished:"live_statistics.live_finished"}[t]},handleClickExport:function(){window.open("/classroom/".concat(this.classroomId,"/live_statistic/export?courseId=").concat(this.courseId,"&title=").concat(this.keyword))}}},v=(e(2251),e(31)),p=Object(v.a)(_,(function(){var t=this,a=t._self._c;return a("layout",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t._f("trans")("live_statistics")))]},proxy:!0}])},[t._v(" "),a("div",{staticClass:"clearfix"},[a("a-select",{staticClass:"pull-left",staticStyle:{width:"200px"},attrs:{"default-value":""},on:{change:t.handleSelectChange}},[a("a-select-option",{attrs:{value:""}},[t._v(t._s(t._f("trans")("live_statistics.checkin_status.all")))]),t._v(" "),t._l(t.courseList,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v("\n        "+t._s(e.title||e.courseSetTitle)+"\n      ")])}))],2),t._v(" "),a("a-input-search",{staticClass:"pull-left ml16",staticStyle:{width:"200px"},attrs:{placeholder:t._f("trans")("live_statistics.task_name_placeholder")},on:{search:t.onSearch}}),t._v(" "),a("a-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:t.handleClickExport}},[t._v("\n      "+t._s(t._f("trans")("site.btn.export"))+"\n    ")])],1),t._v(" "),a("a-table",{staticClass:"mt24",attrs:{columns:t.columns,"data-source":t.data,"row-key":function(t){return t.id},pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"startTime",fn:function(a){return[t._v("\n      "+t._s(t.$dateFormat(a,"YYYY-MM-DD HH:mm"))+"\n    ")]}},{key:"status",fn:function(e){return[a("span",{class:"task-status task-status--".concat(e)},[t._v(t._s(t._f("trans")(t.getTaskStatus(e))))])]}},{key:"action",fn:function(e){return a("span",{},[a("a-button",{attrs:{type:"link"},on:{click:function(a){return t.handleClickViewDetail(e.id)}}},[t._v(t._s(t._f("trans")("site.btn.detail")))])],1)}}])})],1)}),[],!1,null,"5252edfe",null);a.default=p.exports},2071:function(t,a,e){e(2072),t.exports=e(55).Reflect.deleteProperty},2072:function(t,a,e){var s=e(93),i=e(222).f,n=e(165);s(s.S,"Reflect",{deleteProperty:function(t,a){var e=i(n(t),a);return!(e&&!e.configurable)&&delete t[a]}})},2077:function(t,a,e){t.exports=e(2071)},2135:function(t,a,e){},2136:function(t,a,e){},2241:function(t,a,e){"use strict";var s=e(31),i=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("div",{staticClass:"panel panel-default panel-col"},[a("div",{staticClass:"panel-heading"},[t._t("title")],2),t._v(" "),a("div",{staticClass:"panel-body"},[t._t("default")],2)])}),[],!1,null,null,null);a.a=i.exports},2251:function(t,a,e){"use strict";e(2135)},2252:function(t,a,e){"use strict";e(2136)},3:function(t,a,e){var s=e(122);function i(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s(t,i.key,i)}}t.exports=function(t,a,e){return a&&i(t.prototype,a),e&&i(t,e),s(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}}]);