(window.webpackJsonp=window.webpackJsonp||[]).push([[408],{2:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},2047:function(e,t,n){"use strict";n.r(t);var a=n(406),i=n.n(a),o=n(235),s=n.n(o),r=n(2069),l=[{title:Translator.trans("live_name"),dataIndex:"title"},{title:Translator.trans("live_statistics.presenter"),dataIndex:"anchor"},{title:Translator.trans("live_playback_duration"),dataIndex:"liveTime"},{title:Translator.trans("live_statistics.live_time"),dataIndex:"liveStartTime"},{title:Translator.trans("live_statistics.operation"),scopedSlots:{customRender:"actions"}}],c={name:"CoursesetManageLivePlayback",data:function(){return{data:[],columns:l,pagination:{hideOnSinglePage:!0,current:1,pageSize:10,total:0},selectedRowKeys:[],loading:!1,visible:!1,btnLoading:!1,currentId:void 0,courseId:$(".js-course-id").val()}},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},mounted:function(){this.fetchLiveReplay()},methods:{fetchLiveReplay:function(){var e=this;return i()(s.a.mark((function t(){var n,a,i,o,l,c,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,n=e.pagination,a=n.current,i=n.pageSize,o={params:{offset:(a-1)*i,limit:i,courseId:e.courseId}},t.next=5,r.q.get(o);case 5:l=t.sent,c=l.data,d=l.paging,e.loading=!1,e.pagination.total=d.total,e.data=c;case 11:case"end":return t.stop()}}),t)})))()},handleTableChange:function(e){this.pagination.current=e.current,this.fetchLiveReplay()},onSelectChange:function(e){this.selectedRowKeys=e},showModal:function(e){this.currentId=[e],this.visible=!0},hiddenModal:function(){this.visible=!1},handleClickRemove:function(){this.currentId=this.selectedRowKeys,this.visible=!0},handleClickRemoveLivePlayback:function(){var e=this;return i()(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.btnLoading=!0,n={data:{ids:e.currentId}},t.next=4,r.q.delete(n);case 4:a=t.sent,a.success&&(e.$message.success(Translator.trans("message.removal_succeeded")),e.btnLoading=!1,e.visible=!1,e.pagination.current=1,e.fetchLiveReplay());case 7:case"end":return t.stop()}}),t)})))()},handleClickViewLivePlayback:function(e){window.open(e)}}},d=n(31),u=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"mb16",staticStyle:{padding:"12px 20px",background:"#f4f4f4"}},[t("a-button",{attrs:{type:"danger",disabled:!e.hasSelected},on:{click:e.handleClickRemove}},[e._v("\n      "+e._s(e._f("trans")("site.btn.remove_playback"))+"\n    ")])],1),e._v(" "),t("a-table",{attrs:{"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,"row-key":function(e){return e.id},"data-source":e.data,pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"actions",fn:function(n){return[t("a-button-group",[t("a-button",{staticStyle:{padding:"0 8px"},attrs:{type:"primary"},on:{click:function(t){return e.handleClickViewLivePlayback(n.url)}}},[e._v("\n          "+e._s(e._f("trans")("site.btn.view_playback"))+"\n        ")]),e._v(" "),t("a-dropdown",{attrs:{placement:"bottomRight"}},[t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",{on:{click:function(t){return e.showModal(n.id)}}},[e._v("\n              "+e._s(e._f("trans")("site.btn.remove_playback"))+"\n            ")])],1),e._v(" "),t("a-button",{staticStyle:{padding:"0 8px"},attrs:{type:"primary"}},[t("a-icon",{attrs:{type:"down"}})],1)],1)],1)]}}])}),e._v(" "),t("a-modal",{attrs:{title:e._f("trans")("site.btn.remove_playback"),visible:e.visible},on:{cancel:e.hiddenModal}},[e._v("\n    "+e._s(e._f("trans")("modal.content.remove_playback_resources"))+"\n    "),t("template",{slot:"footer"},[t("div",{staticClass:"clearfix"},[t("span",{staticClass:"pull-left",staticStyle:{color:"#fe4040","margin-top":"7px"}},[e._v("\n          "+e._s(e._f("trans")("live.playback.tip.cannot_be_used_normally"))+"\n        ")]),e._v(" "),t("a-button",{attrs:{type:"danger",loading:e.btnLoading},on:{click:e.handleClickRemoveLivePlayback}},[e._v("\n          "+e._s(e._f("trans")("site.btn.confirm"))+"\n        ")])],1)])],2)],1)}),[],!1,null,null,null);t.default=u.exports},2071:function(e,t,n){n(2072),e.exports=n(55).Reflect.deleteProperty},2072:function(e,t,n){var a=n(93),i=n(222).f,o=n(165);a(a.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},2077:function(e,t,n){e.exports=n(2071)},3:function(e,t,n){var a=n(122);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a(e,i.key,i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),a(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}}]);