!function(e){function r(r){for(var a,s,o=r[0],l=r[1],d=r[2],c=0,m=[];c<o.length;c++)s=o[c],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(r);m.length;)m.shift()();return i.push.apply(i,d||[]),t()}function t(){for(var e,r=0;r<i.length;r++){for(var t=i[r],a=!0,o=1;o<t.length;o++){var l=t[o];0!==n[l]&&(a=!1)}a&&(i.splice(r--,1),e=s(s.s=t[0]))}return e}var a={},n={133:0},i=[];function s(r){if(a[r])return a[r].exports;var t=a[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=a,s.d=function(e,r,t){s.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,r){if(1&r&&(e=s(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)s.d(t,a,function(r){return e[r]}.bind(null,a));return t},s.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(r,"a",r),r},s.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},s.p="/static-dist/";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=r,o=o.slice();for(var d=0;d<o.length;d++)r(o[d]);var u=l;i.push([1368,0]),t()}({1368:function(e,r,t){"use strict";t.r(r);var a=t(2),n=t.n(a),i=t(3),s=t.n(i),o=t(105),l=t(84),d=t(177);new(function(){function e(){n()(this,e),this.drag=$("#drag-btn").length?new l.a($("#drag-btn"),$(".js-jigsaw"),{limitType:"web_register"}):null,this.setValidateRule(),this.dragEvent(),this.initValidator(),this.inEventMobile(),this.initMobileMsgVeriCodeSendBtn(),this.initFieldVisitId()}return s()(e,[{key:"dragEvent",value:function(){var e=this;this.drag&&this.drag.on("success",(function(r){e._smsBtnable()}))}},{key:"setValidateRule",value:function(){$.validator.addMethod("spaceNoSupport",(function(e,r){return e.indexOf(" ")<0}),$.validator.format(Translator.trans("validate.have_spaces")))}},{key:"initValidator",value:function(){var e=this;$("#register-form").validate(this._validataRules()),$.validator.addMethod("email_or_mobile_check",(function(r,t,a){var n=!1,i=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(r),s=/^1\d{10}$/.test(r);return s?($(".email_mobile_msg").removeClass("hidden"),e.captchEnable||$(".js-drag-jigsaw").addClass("hidden")):($(".email_mobile_msg").addClass("hidden"),$(".js-drag-jigsaw").removeClass("hidden")),(i||s)&&(n=!0),$.validator.messages.email_or_mobile_check=Translator.trans("validate.mobile_or_email_message"),this.optional(t)||n}),Translator.trans("validate.email_or_mobile_check.message"))}},{key:"inEventMobile",value:function(){var e=this;$("#register_emailOrMobile").blur((function(){var r=$("#register_emailOrMobile").val();e.emSmsCodeValidate(r)})),$("#register_mobile").blur((function(){var r=$("#register_mobile").val();e.emSmsCodeValidate(r)}))}},{key:"initDragCaptchaCodeRule",value:function(){$(".js-drag-img").length&&$('[name="dragCaptchaToken"]').rules("add",{required:!0,messages:{required:Translator.trans("auth.register.drag_captcha_tips")}})}},{key:"_smsBtnDisable",value:function(){$(".js-sms-send-btn").addClass("disabled").attr("disabled",!0)}},{key:"_smsBtnable",value:function(){$(".js-sms-send-btn").removeClass("disabled").attr("disabled",!1)}},{key:"initSmsCodeRule",value:function(){$('[name="sms_code"]').rules("add",{required:!0,unsigned_integer:!0,rangelength:[6,6],es_remote:{type:"get"},messages:{rangelength:Translator.trans("validate.sms_code.message")}})}},{key:"initMobileMsgVeriCodeSendBtn",value:function(){var e=$(".js-sms-send-btn"),r=this;e.click((function(t){var a=(new d.a).getCoordinate(t,$("meta[name=csrf-token]").attr("content"));r._smsBtnDisable();var n=$("[name='verifiedMobile']").length?"verifiedMobile":"emailOrMobile";new o.a({element:e,url:$(this).data("smsUrl"),smsType:"sms_registration",dataTo:n,captcha:!0,captchaValidated:!0,captchaNum:"dragCaptchaToken",encryptedPoint:a,preSmsSend:function(){return!0},error:function(e){r.drag.initDragCaptcha()},additionalAction:function(t){return"captchaRequired"==t&&(e.attr("disabled",!0),$(".js-drag-jigsaw").removeClass("hidden"),r.captchEnable=!0,r.drag&&r.drag.initDragCaptcha(),!0)}})}))}},{key:"_validataRules",value:function(){var e=this;return{rules:{nickname:{required:!0,byte_minlength:4,byte_maxlength:18,nickname:!0,chinese_alphanumeric:!0,es_remote:{type:"get"}},password:this._passwordValidateRules(),email:{required:!0,email:!0,es_remote:{type:"get"}},invitedCode:{required:!1,reg_inviteCode:!0,es_remote:{type:"get"}},emailOrMobile:{required:!0,email_or_mobile_check:!0,es_remote:{type:"get",callback:function(r){r?e._smsBtnable():e._smsBtnDisable()}}},verifiedMobile:{required:!0,phone:!0,es_remote:{type:"get",callback:function(r){r?e._smsBtnable():e._smsBtnDisable()}}},dragCaptchaToken:{required:!0},agree_policy:{required:!0}},messages:{nickname:{required:Translator.trans("auth.register.nickname_required_error_hit")},verifiedMobile:{required:Translator.trans("validate.phone.message")},emailOrMobile:{required:Translator.trans("validate.phone_and_email_input.message")},email:{required:Translator.trans("validate.valid_email_input.message")},dragCaptchaToken:{required:Translator.trans("auth.register.drag_captcha_tips")},agree_policy:{required:Translator.trans("validate.valid_policy_input.message")},password:{required:Translator.trans("auth.register.password_required_error_hint")}}}}},{key:"_passwordValidateRules",value:function(){var e=$("#password_level").val(),r={spaceNoSupport:!0};return r["check_password_".concat(e)]=!0,r}},{key:"emSmsCodeValidate",value:function(e){/^1\d{10}$/.test(e)?(this.initSmsCodeRule(),$('[name="dragCaptchaToken"]').rules("remove")):(this.initDragCaptchaCodeRule(),$('[name="sms_code"]').rules("remove"))}},{key:"initFieldVisitId",value:function(){$(document).ready((function(){"undefined"!==window._VISITOR_ID&&$('[name="registerVisitId"]').val(window._VISITOR_ID)}))}}]),e}())},177:function(e,r,t){"use strict";t.d(r,"a",(function(){return h}));var a=t(2),n=t.n(a),i=t(3),s=t.n(i),o=2654435769;function l(e,r){var t=e.length,a=t<<2;if(r){var n=e[t-1];if(n<(a-=4)-3||n>a)return null;a=n}for(var i=0;i<t;i++)e[i]=String.fromCharCode(255&e[i],e[i]>>>8&255,e[i]>>>16&255,e[i]>>>24&255);var s=e.join("");return r?s.substring(0,a):s}function d(e,r){var t,a=e.length,n=a>>2;0!=(3&a)&&++n,r?(t=new Array(n+1))[n]=a:t=new Array(n);for(var i=0;i<a;++i)t[i>>2]|=e.charCodeAt(i)<<((3&i)<<3);return t}function u(e){return 4294967295&e}function c(e,r,t,a,n,i){return(t>>>5^r<<2)+(r>>>3^t<<4)^(e^r)+(i[3&a^n]^t)}function m(e){return e.length<4&&(e.length=4),e}function f(e){if(/^[\x00-\x7f]*$/.test(e))return e;for(var r=[],t=e.length,a=0,n=0;a<t;++a,++n){var i=e.charCodeAt(a);if(i<128)r[n]=e.charAt(a);else if(i<2048)r[n]=String.fromCharCode(192|i>>6,128|63&i);else{if(!(i<55296||i>57343)){if(a+1<t){var s=e.charCodeAt(a+1);if(i<56320&&56320<=s&&s<=57343){var o=65536+((1023&i)<<10|1023&s);r[n]=String.fromCharCode(240|o>>18&63,128|o>>12&63,128|o>>6&63,128|63&o),++a;continue}}throw new Error("Malformed string")}r[n]=String.fromCharCode(224|i>>12,128|i>>6&63,128|63&i)}}return r.join("")}function g(e,r){return null==e||0===e.length?e:(e=f(e),r=f(r),l(function(e,r){var t,a,n,i,s,l,d=e.length,m=d-1;for(a=e[m],n=0,l=0|Math.floor(6+52/d);l>0;--l){for(i=(n=u(n+o))>>>2&3,s=0;s<m;++s)t=e[s+1],a=e[s]=u(e[s]+c(n,t,a,s,i,r));t=e[0],a=e[m]=u(e[m]+c(n,t,a,m,i,r))}return e}(d(e,!0),m(d(r,!1))),!1))}var h=function(){function e(){n()(this,e)}return s()(e,[{key:"getCoordinate",value:function(e,r){var t=r,a=e.screenX+","+e.screenY;return"1."+btoa(g(a,t))}}]),e}()},22:function(e,r){e.exports=jQuery}});